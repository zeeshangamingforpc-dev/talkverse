const textArea = document.getElementById('text');
const voiceSelect = document.getElementById('voiceSelect');
const generateBtn = document.getElementById('generateVoiceBtn');
const downloadBtn = document.getElementById('downloadBtn');
const speed = document.getElementById('speed');
const pitch = document.getElementById('pitch');

let voices = [];

function populateVoiceList() {
    voices = speechSynthesis.getVoices();
    voiceSelect.innerHTML = '';
    voices.forEach(v => {
        const option = document.createElement('option');
        option.textContent = `${v.name} (${v.lang})`;
        option.value = v.name;
        voiceSelect.appendChild(option);
    });
}

populateVoiceList();
if (speechSynthesis.onvoiceschanged !== undefined) {
    speechSynthesis.onvoiceschanged = populateVoiceList;
}

// Generate Voice
generateBtn.addEventListener('click', () => {
    const text = textArea.value.trim();
    if(!text){ alert("Please type some text!"); return; }

    const utterance = new SpeechSynthesisUtterance(text);
    const selectedVoice = voices.find(v => v.name === voiceSelect.value);
    if(selectedVoice) utterance.voice = selectedVoice;

    utterance.rate = parseFloat(speed.value);
    utterance.pitch = parseFloat(pitch.value);

    speechSynthesis.speak(utterance);
});

// Download MP3 (placeholder)
downloadBtn.addEventListener('click', () => {
    alert("To enable MP3 download, integrate a free TTS API like ElevenLabs or TTSMP3.");
});
